<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="招聘" http-equiv="keywords">
<meta name="description" content="招聘,培训">
<meta name="format-detection" content="telephone=no"><!-- 禁止IPHONE识别手机号码 -->
<meta name="viewport" content="width=device-width,user-scalable=no, initial-scale=1">
<meta name="renderer" content="webkit" />

<title>js代码（www.jsdaima.com）- IT资源下载平台</title>
<!-- css -->
<link rel="stylesheet" type="text/css" href="/Public/home/css/index.css">
<link rel="stylesheet" type="text/css" href="/Public/home/css/swiper.min.css">

<!-- public_css -->
<link rel="stylesheet" type="text/css" href="/Public/home/css/public/public_lib.css">

<!-- zy_public_css -->
<link rel="stylesheet" type="text/css" href="/Public/home/css/zy_public.css">
<!-- 子页css -->
<link rel="stylesheet" type="text/css" href="/Public/home/css/children.css">

<!-- js -->
<script type="text/javascript" src="/Public/home/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/Public/home/js/swiper.min.js"></script>
<script type="text/javascript" src="/Public/home/js/public.js"></script>
	<script type="text/javascript" src="/Public/home/js/layer/layer.js"></script>
	<script type="text/javascript" src="/Public/home/js/jquery.validate/jquery.validate.min.js"></script>
	<style>
		div.validate-error{
			color: #F2B300;
			text-indent: 5em;
			font-size: 1em;
		}
		div.error{
			color: #F2B300;
			text-indent: 7em;
			font-size: 1em;
		}
	</style>
</head>
<body class="bgwh">
<header class="zy_search_top_box scroll_fix">
	<div class="zy_title_top fix">
		<div class="one" href="javascript:" onclick="history.back();"><img src="/Public/home/images/back_jt.png"><span>返回</span></div>
		<h1>账户与安全</h1>
		
	</div>
</header>	

<!-- 占位框 -->
<div class="top_zhanwei_box"></div>	

<!-- 内容框 -->
<div class="zy_module-content zy_vip_conbox">
	<div class="vip_user_info_mima">
		<form action="" method="post" id="form">
			<div class="form_line"><label><span>原密码</span><input type="password" name="password" placeholder="请输入原密码"></label></div>
            <div class="validate-error">{$errors.password}</div>
			<div class="form_line"><label><span>新密码</span><input type="password" name="newPwd" placeholder="请输入新密码"></label></div>
			<div class="validate-error">{$errors.newPwd}</div>
			<div class="form_line"><label><span>确认密码</span><input type="password" name="rePwd" placeholder="请再次输入新密码"></label></div>
			<div class="validate-error">{$errors.rePwd}</div>
			<button class="zy_butn bord_3">确认修改</button>
		</form>
	</div>
</div>
<script>
	var a = $('#form').validate({
		rules:{
			password:{
				required:true
			},
			newPwd:{
				required:true
			},
			rePwd:{
				required:true
			}
		},
		messages:{
			password:{
				required:'原密码不能为空'
			},
			newPwd:{
				required:'新密码不能为空'
			},
			rePwd:{
				required:'确认密码不能为空'
			}
		},
		errorElement: "div",
		success: function(div) {
			div.addClass("ok").html('验证格式正确');
		},
		validClass: "ok"
	});
$('#form').submit(function() {
	if (a.form()) {

	$.post('{:U("Home/User/changePwd")}', $(this).serialize(), function (data) {
		if (data.status == 'ok') {
			layer.open({
				content: data.msg,
				skin: 'msg',
				time: 2,
				end: function () {
					location = data.url;
				}
			})
		} else {
			layer.open({
				content: data.msg,
				skin: 'msg',
				time: 2,
				// end: function () {
				// 	location.reload()
				// }
			})
		}
	}, 'json');
}
	return false;
})



</script>
</body>
</html>